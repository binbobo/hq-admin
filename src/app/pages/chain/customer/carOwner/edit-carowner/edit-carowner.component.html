<ng-template hq-alerter></ng-template>
<div class="card">
  <div class="card-header">
    编辑车主
  </div>
  <!--填写车主信息表单-->
  <div class="card-block">
    <hq-customer-add-form #customerForm [customerId]="customerId" (formValueChanges)="enableSaveCustomer=$event" (load)="enableSaveCustomer=$event.isFormValid;newVehiclesData=$event.vehicles"></hq-customer-add-form>
    <br>
    <!--(delClick)="onDelVehicleConfirmHandler($event)"-->
    <hq-vehicle-add [data]="newVehiclesData" (addClick)="vehicleModal.show();" (editClick)="selectedVehicle=$event;vehicleModal.show();"></hq-vehicle-add>
    <hr>
    <div class="text-center">
      <button [hqSpinner]="generating" type="button" class="btn btn-primary" [disabled]="!enableSaveCustomer" (click)="saveCustomer()">保存车主信息</button>
      <button type="button" class="btn btn-secondary" [disabled]="false" (click)="goBack()">返回车主列表</button>
    </div>
  </div>
</div>

<div hqBsModal #vehicleModal="hq-bs-modal" class="modal fade" tabindex="-1" role="dialog">
  <div *ngIf="vehicleModal.isShown" class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h6 class="modal-title pull-left">编辑车主信息</h6>
        <button type="button" class="close pull-right" (click)="vehicleModal.hide();selectedVehicle = null;" aria-label="Close">
          <span aria-hidden="true"><i class="fa fa-times-circle" aria-hidden="true"></i></span>
        </button>
      </div>
      <div class="modal-body">
        <hq-add-vehicle [vehicle]="selectedVehicle" (onVehicleCancel)="vehicleModal.hide();selectedVehicle = null;" (onVehicleConfirm)="onVehicleConfirmHandler($event, vehicleModal)"></hq-add-vehicle>
      </div>
    </div>
  </div>
</div>